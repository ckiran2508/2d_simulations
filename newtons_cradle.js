function run(){function e(){for(let t=0;t<10;t++){var e={weight:Particle.create(250+42*t,300,20,"lightgray",100),hinge:Particle.create(250+42*t,150,5,"black"),latched:!1};e.weight.acceleration=Vector.create(0,-1),n.push(e)}var t=Vector.VectorDiff(n[0].hinge.position,n[0].weight.position);t.setDir(5*Math.PI/6),n[0].weight.position=Vector.VectorSum(n[0].hinge.position,t)}function t(){for(let t=0;t<n.length;t++){var e=n[t];e.weight.moveAround(e.hinge)}for(let e=0;e<n.length;e++){const t=n[e],i=n.slice(e+1);for(let e of i)e.weight.resolveIfCollision(t.weight)}}function i(){for(let e=0;e<n.length;e++)draw(c,n[e].weight),draw(c,n[e].hinge),c.beginPath(),c.moveTo(n[e].hinge.position._x,n[e].hinge.position._y),c.lineTo(n[e].weight.position._x,n[e].weight.position._y),c.stroke()}function o(){c.clearRect(0,0,canvas.width,canvas.height),t(),i(),requestAnimationFrame(o)}var n=[],a=(Vector.create(0,.2),!1);canvas.addEventListener("mousedown",function(e){a=!0;const t=canvas.getBoundingClientRect();var i=Vector.create(e.clientX-t.left.toFixed(0),e.clientY-t.top.toFixed(0));for(let e=0;e<n.length;e++)if(n[e].weight.position.diffMag(i)<n[e].weight.radius){n[e].latched=!0;break}}),canvas.addEventListener("mousemove",function(e){var t;const i=canvas.getBoundingClientRect();if(a){for(let e=0;e<n.length;e++)if(void 0!==n[e].latched&&1==n[e].latched){t=n[e];break}if(void 0!==t){console.log(t);var o=Vector.create(e.clientX-i.left.toFixed(0),e.clientY-i.top.toFixed(0)),c=Vector.VectorDiff(t.hinge.position,o);c.setMag(t.hinge.position.diffMag(t.weight.position)),t.weight.position=Vector.VectorSum(t.hinge.position,c)}}}),canvas.addEventListener("mouseup",function(e){a=!1;for(let e=0;e<n.length;e++)if(void 0!==n[e].latched&&1==n[e].latched){latchedSwing=n[e],latchedSwing.latched=!1;break}}),e(),o()}var canvas=document.querySelector("canvas"),c=canvas.getContext("2d");run();