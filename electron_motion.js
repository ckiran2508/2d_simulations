function run(){function e(){for(let t=0;t<10;t++){var e=Particle.create(50,20+20*t,5,"lightgray",1);e.charge=1,e.velocity=Vector.create(randomNumberRange(1,5),0),l.push(e)}}function t(){c.beginPath(),c.moveTo(g.x1,0),c.lineTo(g.x1,canvas.height),c.stroke();for(let e=50;e<canvas.height;e+=50)for(let t=g.x1+50;t<700;t+=50)c.fillText("x",t,e);c.beginPath(),c.moveTo(g.x2,0),c.lineTo(g.x2,canvas.height),c.stroke()}function n(){for(let e=0;e<l.length;e++)l[e].motionInAMagneticField(g),l[e].updatePosition()}function o(){for(let e=0;e<l.length;e++)draw(c,l[e])}function i(){c.clearRect(0,0,canvas.width,canvas.height),null!==s&&null!==r&&(draw(c,s),c.beginPath(),c.moveTo(s.position.getX(),s.position.getY()),c.lineTo(r.getX(),r.getY()),c.stroke()),n(),t(),o(),requestAnimationFrame(i)}var a,r,l=[],s=null;canvas.addEventListener("mousedown",function(e){a=!0;const t=canvas.getBoundingClientRect();var n=Vector.create(e.clientX-t.left.toFixed(0),e.clientY-t.top.toFixed(0));s=Particle.create(n.getX(),n.getY(),5,"lightgray",100),r=n}),canvas.addEventListener("mousemove",function(e){if(a){const t=canvas.getBoundingClientRect();r=Vector.create(e.clientX-t.left.toFixed(0),e.clientY-t.top.toFixed(0))}}),canvas.addEventListener("mouseup",function(e){a=!1;const t=canvas.getBoundingClientRect();var n=Vector.create(e.clientX-t.left.toFixed(0),e.clientY-t.top.toFixed(0));s.velocity=Vector.VectorDiff(n,s.position),s.velocity.setMag(s.velocity.getMag()/10),s.charge=1,l.push(s),s=null,r=null});var g={x1:400,y1:0,x2:700,y2:canvas.height,strength:.01};e(),i()}var canvas=document.querySelector("canvas"),c=canvas.getContext("2d");run();